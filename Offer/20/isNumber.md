# 剑指 Offer 20. 表示数值的字符串
## 题目

请实现一个函数用来判断字符串是否表示数值（包括整数和小数）。例如，字符串"+100"、"5e2"、"-123"、"3.1416"、"-1E-16"、"0123"都表示数值，但"12e"、"1a3.14"、"1.2.3"、"+-5"及"12e+5.4"都不是。

## 题解
### 算法分析
1. 初始化：
    1.1 状态转移表 states ： 设 states[i] ，其中 i 为所处状态， states[i] 使用哈希表存储可转移至的状态。键值对 (key, value) 含义：输入字符 key ，则从状态 i 转移至状态 value 。
    1.2 当前状态 p ： 起始状态初始化为 p = 0 。
2. 状态转移循环： 遍历字符串 s 的每个字符 c 。
    2.1 记录字符类型 t ： 分为四种情况。
    当 c 为正负号时，执行 t = 's' ;
    当 c 为数字时，执行 t = 'd' ;
    当 c 为 e 或 E 时，执行 t = 'e' ;
    当 c 为 . 或 空格 时，执行 t = c （即用字符本身表示字符类型）;
    否则，执行 t = '?' ，代表为不属于判断范围的非法字符，后续直接返回false 。
    2.2 终止条件： 若字符类型 t 不在哈希表 states[p] 中，说明无法转移至下一状态，因此直接返回false 。
    2.3 状态转移： 状态 p 转移至 states[p][t] 。
3. 返回值： 跳出循环后，若状态 p ∈2,3,7,8 ，说明结尾合法，返回true ，否则返false 。
### 复杂度分析
+ 时间复杂度：O(n)
+ 空间复杂度：O(1)
### 源码
```C++ []
class Solution {
public:
    bool isNumber(string s) {
        map<char, int> states[9] = {
            {{' ', 0}, {'s', 1}, {'d', 2}, {'.', 4}},
            {{'d', 2}, {'.', 4}},
            {{'d', 2}, {'.', 3}, {'e', 5}, {' ', 8}},
            {{'d', 3}, {'e', 5}, {' ', 8}},
            {{'d', 3}},
            {{'s', 6}, {'d', 7}},
            {{'d', 7}},
            {{'d', 7}, {' ', 8}},
            {{' ', 8}},
        };
        int p = 0;
        char t;
        for (auto &&c : s)
        {
            if (c == '+' || c == '-')
            {
                t = 's';
            }
            else if (c >= '0' && c <= '9')
            {
                t = 'd';
            }
            else if (c == 'e' || c == 'E')
            {
                t = 'e';
            }
            else if (c == '.' || c == ' ')
            {
                t = c;
            }
            else
            {
                t = '?';
            }
            map<char, int>::iterator it = states[p].find(t);
            if (it == states[p].end())
            {
                return false;
            }
            p = it->second;
        }
        return p == 2 || p == 3 || p == 7 || p == 8;  
    }
};